<!DOCTYPE html>
<html lang="ç®€ä½“ä¸­æ–‡">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>elastic-job-spring-boot | PurgeTeam</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="ç®€ä½“ä¸­æ–‡">
    <link rel="preload" href="/assets/css/0.styles.298a343f.css" as="style"><link rel="preload" href="/assets/js/app.8d7c9d3d.js" as="script"><link rel="preload" href="/assets/js/2.1de14bcc.js" as="script"><link rel="preload" href="/assets/js/13.6e007452.js" as="script"><link rel="prefetch" href="/assets/js/10.11358709.js"><link rel="prefetch" href="/assets/js/11.b5313f69.js"><link rel="prefetch" href="/assets/js/12.61f0cd74.js"><link rel="prefetch" href="/assets/js/14.a54043a4.js"><link rel="prefetch" href="/assets/js/15.0cc6043f.js"><link rel="prefetch" href="/assets/js/16.d2974e83.js"><link rel="prefetch" href="/assets/js/17.e959bdde.js"><link rel="prefetch" href="/assets/js/3.b942c716.js"><link rel="prefetch" href="/assets/js/4.1ca227ac.js"><link rel="prefetch" href="/assets/js/5.f801f24f.js"><link rel="prefetch" href="/assets/js/6.57a493c9.js"><link rel="prefetch" href="/assets/js/7.5ab16c32.js"><link rel="prefetch" href="/assets/js/8.dae1bbef.js"><link rel="prefetch" href="/assets/js/9.cf3e6b51.js">
    <link rel="stylesheet" href="/assets/css/0.styles.298a343f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">PurgeTeam</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/buckets/" class="nav-link">
  ğŸš€å…¨å®¶æ¡¶NewğŸ”¥
</a></div><div class="nav-item"><a href="/disposition/" class="nav-link">
  é…ç½®
</a></div><div class="nav-item"><a href="/roadmap/" class="nav-link">
  ç‰ˆæœ¬è§„åˆ’
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ—§ç‰ˆæœ¬æŒ‡å—" class="dropdown-title"><span class="title">æ—§ç‰ˆæœ¬æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/old/unified-dispose-springboot-starter/" class="nav-link">
  å…¨å±€å¤„ç†(å¼‚å¸¸+è¿”å›)
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/swagger-spring-boot/" class="nav-link">
  swaggeré›†æˆ
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/elastic-job-spring-boot/" class="nav-link router-link-exact-active router-link-active">
  ElasticJob Starter
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/dynamic-config-spring-boot/" class="nav-link">
  åŠ¨æ€é…ç½®ç›‘å¬
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/data-source-spring-boot/" class="nav-link">
  Mysqlå¤šæ•°æ®æº
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/log-trace-spring-boot/" class="nav-link">
  æ—¥å¿—é“¾è·¯è¿½è¸ª
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ—§ç‰ˆæœ¬ç”Ÿæ€" class="dropdown-title"><span class="title">æ—§ç‰ˆæœ¬ç”Ÿæ€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/unified-dispose-springboot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…¨å±€å¤„ç†(å¼‚å¸¸+è¿”å›)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/swagger-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swaggeré›†æˆ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/elastic-job-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElasticJob Starter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/dynamic-config-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åŠ¨æ€é…ç½®ç›‘å¬
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/data-source-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysqlå¤šæ•°æ®æº
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/log-trace-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ—¥å¿—é“¾è·¯è¿½è¸ª
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://purgeyao.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ä¸ªäººåšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/old/elastic-job-spring-boot/" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/purgeteam/" target="_blank" rel="noopener noreferrer" class="repo-link">
    PurgeTeam GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/buckets/" class="nav-link">
  ğŸš€å…¨å®¶æ¡¶NewğŸ”¥
</a></div><div class="nav-item"><a href="/disposition/" class="nav-link">
  é…ç½®
</a></div><div class="nav-item"><a href="/roadmap/" class="nav-link">
  ç‰ˆæœ¬è§„åˆ’
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ—§ç‰ˆæœ¬æŒ‡å—" class="dropdown-title"><span class="title">æ—§ç‰ˆæœ¬æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/old/unified-dispose-springboot-starter/" class="nav-link">
  å…¨å±€å¤„ç†(å¼‚å¸¸+è¿”å›)
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/swagger-spring-boot/" class="nav-link">
  swaggeré›†æˆ
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/elastic-job-spring-boot/" class="nav-link router-link-exact-active router-link-active">
  ElasticJob Starter
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/dynamic-config-spring-boot/" class="nav-link">
  åŠ¨æ€é…ç½®ç›‘å¬
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/data-source-spring-boot/" class="nav-link">
  Mysqlå¤šæ•°æ®æº
</a></li><li class="dropdown-item"><!----> <a href="/guide/old/log-trace-spring-boot/" class="nav-link">
  æ—¥å¿—é“¾è·¯è¿½è¸ª
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ—§ç‰ˆæœ¬ç”Ÿæ€" class="dropdown-title"><span class="title">æ—§ç‰ˆæœ¬ç”Ÿæ€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/unified-dispose-springboot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…¨å±€å¤„ç†(å¼‚å¸¸+è¿”å›)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/swagger-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swaggeré›†æˆ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/elastic-job-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElasticJob Starter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/dynamic-config-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åŠ¨æ€é…ç½®ç›‘å¬
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/data-source-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysqlå¤šæ•°æ®æº
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/purgeteam/log-trace-spring-boot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ—¥å¿—é“¾è·¯è¿½è¸ª
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://purgeyao.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ä¸ªäººåšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/old/elastic-job-spring-boot/" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/purgeteam/" target="_blank" rel="noopener noreferrer" class="repo-link">
    PurgeTeam GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/guide/old/unified-dispose-springboot-starter/" class="sidebar-link">å…¨å±€å¤„ç†</a></li><li><a href="/guide/old/swagger-spring-boot/" class="sidebar-link">Swaggeré›†æˆ</a></li><li><a href="/guide/old/elastic-job-spring-boot/" class="active sidebar-link">ElasticJob Plus</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_1-ç®€ä»‹" class="sidebar-link">1 ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_1-1-ä½¿ç”¨åœºæ™¯" class="sidebar-link">1.1 ä½¿ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_1-2-åŠŸèƒ½åˆ—è¡¨" class="sidebar-link">1.2 åŠŸèƒ½åˆ—è¡¨</a></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_1-3-æ¦‚å¿µ" class="sidebar-link">1.3 æ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_1-4-å°è£…elasticjob" class="sidebar-link">1.4 å°è£…elasticjob</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_2-ä½¿ç”¨è¯´æ˜" class="sidebar-link">2.ä½¿ç”¨è¯´æ˜:</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_2-1-æ·»åŠ ä¾èµ–" class="sidebar-link">2.1 æ·»åŠ ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_2-2-é…ç½®" class="sidebar-link">2.2 é…ç½®</a></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_2-3-å®šæ—¶å™¨å®ç°æ–¹æ³•ç¼–å†™" class="sidebar-link">2.3 å®šæ—¶å™¨å®ç°æ–¹æ³•ç¼–å†™</a></li><li class="sidebar-sub-header"><a href="/guide/old/elastic-job-spring-boot/#_2-4-é…ç½®å®šæ—¶å™¨" class="sidebar-link">2.4 é…ç½®å®šæ—¶å™¨</a></li></ul></li></ul></li><li><a href="/guide/old/dynamic-config-spring-boot/" class="sidebar-link">åŠ¨æ€é…ç½®ç›‘å¬</a></li><li><a href="/guide/old/data-source-spring-boot/" class="sidebar-link">Mysqlå¤šæ•°æ®æº</a></li><li><a href="/guide/old/log-trace-spring-boot/" class="sidebar-link">æ—¥å¿—é“¾è·¯è¿½è¸ª</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="elastic-job-spring-boot"><a href="#elastic-job-spring-boot" class="header-anchor">#</a> elastic-job-spring-boot</h1> <p><a href="https://search.maven.org/search?q=g:com.purgeteam%20AND%20a:elasticjob-spring-boot-starter" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/maven-central/v/com.purgeteam/elasticjob-spring-boot-starter.svg?label=Maven%20Central" alt="Maven Central"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <img src="https://img.shields.io/badge/SpringBoot-2.1.5RELEASE-green.svg" alt="License"> <img src="https://img.shields.io/badge/JAVA-1.8+-green.svg" alt="License"> <img src="https://img.shields.io/badge/maven-3.0+-green.svg" alt="License"> <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/license-Apache%202-4EB1BA.svg" alt="License"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>qqäº¤æµç¾¤:</strong><code>812321371</code></p> <h2 id="_1-ç®€ä»‹"><a href="#_1-ç®€ä»‹" class="header-anchor">#</a> 1 ç®€ä»‹</h2> <p><code>Elastic-Job</code>æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è°ƒåº¦è§£å†³æ–¹æ¡ˆï¼Œç”±ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„å­é¡¹ç›®<code>Elastic-Job-Lite</code>å’Œ<code>Elastic-Job-Cloud</code>ç»„æˆã€‚<code>Elastic-Job-Lite</code>å®šä½ä¸ºè½»é‡çº§æ— ä¸­å¿ƒåŒ–è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨jaråŒ…çš„å½¢å¼æä¾›åˆ†å¸ƒå¼ä»»åŠ¡çš„åè°ƒæœåŠ¡ã€‚
åŸºäº<code>quartz</code>å®šæ—¶ä»»åŠ¡æ¡†æ¶ä¸ºåŸºç¡€çš„ï¼Œå› æ­¤å…·å¤‡<code>quartz</code>çš„å¤§éƒ¨åˆ†åŠŸèƒ½
ä½¿ç”¨<code>zookeeper</code>åšåè°ƒï¼Œè°ƒåº¦ä¸­å¿ƒï¼Œæ›´åŠ è½»é‡çº§
æ”¯æŒä»»åŠ¡çš„åˆ†ç‰‡
æ”¯æŒå¼¹æ€§æ‰©å®¹,å¯ä»¥æ°´å¹³æ‰©å±•, å½“ä»»åŠ¡å†æ¬¡è¿è¡Œæ—¶ï¼Œä¼šæ£€æŸ¥å½“å‰çš„æœåŠ¡å™¨æ•°é‡ï¼Œé‡æ–°åˆ†ç‰‡ï¼Œåˆ†ç‰‡ç»“æŸä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œä»»åŠ¡
å¤±æ•ˆè½¬ç§»ï¼Œå®¹é”™å¤„ç†ï¼Œå½“ä¸€å°è°ƒåº¦æœåŠ¡å™¨å®•æœºæˆ–è€…è·Ÿ<code>zookeeper</code>æ–­å¼€è¿æ¥ä¹‹åï¼Œä¼šç«‹å³åœæ­¢ä½œä¸šï¼Œç„¶åå†å»å¯»æ‰¾å…¶ä»–ç©ºé—²çš„è°ƒåº¦æœåŠ¡å™¨ï¼Œæ¥è¿è¡Œå‰©ä½™çš„ä»»åŠ¡
æä¾›è¿ç»´ç•Œé¢ï¼Œå¯ä»¥ç®¡ç†ä½œä¸šå’Œæ³¨å†Œä¸­å¿ƒã€‚</p> <h3 id="_1-1-ä½¿ç”¨åœºæ™¯"><a href="#_1-1-ä½¿ç”¨åœºæ™¯" class="header-anchor">#</a> 1.1 ä½¿ç”¨åœºæ™¯</h3> <p>ç”±äºé¡¹ç›®ä¸ºå¾®æœåŠ¡ï¼Œå•æ¨¡å—å¯èƒ½åœ¨ä¸¤ä¸ªå®ä¾‹ä»¥ä¸Šçš„æ•°é‡ï¼Œå®šæ—¶å™¨å°±ä¼šå‡ºç°å¤šå®ä¾‹åŒæ—¶æ‰§è¡Œçš„æƒ…å†µã€‚
ä¸€èˆ¬å®šæ—¶å™¨ç¼ºå°‘ç®¡ç†ç•Œé¢ï¼Œæ— æ³•ç›‘æ§å®šæ—¶å™¨æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚
å¸‚é¢ä¸Šå¸¸è§çš„è§£å†³æ–¹æ¡ˆä¸ºå®šæ—¶å™¨åŠ é”çš„æ“ä½œï¼Œæˆ–è€…é‡‡ç”¨ç¬¬3æ–¹åˆ†å¸ƒå¼å®šæ—¶å™¨ã€‚
åˆ†å¸ƒå¼å®šæ—¶å™¨æœ‰å¤šç§æ–¹æ¡ˆï¼Œæ¯”å¦‚é˜¿é‡Œå†…éƒ¨çš„<code>ScheduledX</code>ï¼Œå½“å½“ç½‘çš„<code>Elastic job</code>ï¼Œä¸ªäººå¼€æºçš„<code>xxl-job</code>ç­‰ã€‚</p> <h3 id="_1-2-åŠŸèƒ½åˆ—è¡¨"><a href="#_1-2-åŠŸèƒ½åˆ—è¡¨" class="header-anchor">#</a> 1.2 åŠŸèƒ½åˆ—è¡¨</h3> <ul><li>åˆ†å¸ƒå¼è°ƒåº¦åè°ƒ</li> <li>å¼¹æ€§æ‰©å®¹ç¼©å®¹</li> <li>å¤±æ•ˆè½¬ç§»</li> <li>é”™è¿‡æ‰§è¡Œä½œä¸šé‡è§¦å‘</li> <li>ä½œä¸šåˆ†ç‰‡ä¸€è‡´æ€§ï¼Œä¿è¯åŒä¸€åˆ†ç‰‡åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ä»…ä¸€ä¸ªæ‰§è¡Œå®ä¾‹</li> <li>è‡ªè¯Šæ–­å¹¶ä¿®å¤åˆ†å¸ƒå¼ä¸ç¨³å®šé€ æˆçš„é—®é¢˜</li> <li>æ”¯æŒå¹¶è¡Œè°ƒåº¦</li> <li>æ”¯æŒä½œä¸šç”Ÿå‘½å‘¨æœŸæ“ä½œ</li> <li>ä¸°å¯Œçš„ä½œä¸šç±»å‹</li> <li>Springæ•´åˆä»¥åŠå‘½åç©ºé—´æä¾›</li> <li>è¿ç»´å¹³å°</li></ul> <h3 id="_1-3-æ¦‚å¿µ"><a href="#_1-3-æ¦‚å¿µ" class="header-anchor">#</a> 1.3 æ¦‚å¿µ</h3> <p>åˆ†ç‰‡ï¼šä»»åŠ¡çš„åˆ†å¸ƒå¼æ‰§è¡Œï¼Œéœ€è¦å°†ä¸€ä¸ªä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡é¡¹ï¼Œç„¶åç”±åˆ†å¸ƒå¼çš„æœåŠ¡å™¨åˆ†åˆ«æ‰§è¡ŒæŸä¸€ä¸ªæˆ–å‡ ä¸ªåˆ†ç‰‡é¡¹ã€‚
ä¾‹å¦‚ï¼šæœ‰ä¸€ä¸ªéå†æ•°æ®åº“æŸå¼ è¡¨çš„ä½œä¸šï¼Œç°æœ‰2å°æœåŠ¡å™¨ã€‚ä¸ºäº†å¿«é€Ÿçš„æ‰§è¡Œä½œä¸šï¼Œé‚£ä¹ˆæ¯å°æœåŠ¡å™¨åº”æ‰§è¡Œä½œä¸šçš„<code>50%</code>ã€‚ ä¸ºæ»¡è¶³æ­¤éœ€æ±‚ï¼Œå¯å°†ä½œä¸šåˆ†æˆ2ç‰‡ï¼Œæ¯å°æœåŠ¡å™¨æ‰§è¡Œ1ç‰‡ã€‚ä½œä¸šéå†æ•°æ®çš„é€»è¾‘åº”ä¸ºï¼šæœåŠ¡å™¨Aéå†IDä»¥å¥‡æ•°ç»“å°¾çš„æ•°æ®ï¼›æœåŠ¡å™¨Béå†IDä»¥å¶æ•°ç»“å°¾çš„æ•°æ®ã€‚ å¦‚æœåˆ†æˆ10ç‰‡ï¼Œåˆ™ä½œä¸šéå†æ•°æ®çš„é€»è¾‘åº”ä¸ºï¼šæ¯ç‰‡åˆ†åˆ°çš„åˆ†ç‰‡é¡¹åº”ä¸ºID%10ï¼Œè€ŒæœåŠ¡å™¨Aè¢«åˆ†é…åˆ°åˆ†ç‰‡é¡¹<code>0,1,2,3,4</code>ï¼›æœåŠ¡å™¨Bè¢«åˆ†é…åˆ°åˆ†ç‰‡é¡¹<code>5,6,7,8,9</code>ï¼Œç›´æ¥çš„ç»“æœå°±æ˜¯æœåŠ¡å™¨Aéå†<code>ID</code>ä»¥<code>0-4</code>ç»“å°¾çš„æ•°æ®ï¼›æœåŠ¡å™¨Béå†<code>ID</code>ä»¥<code>5-9</code>ç»“å°¾çš„æ•°æ®ã€‚</p> <p>å†å²è½¨è¿¹ï¼š<code>Elastic-Job</code>æä¾›äº†äº‹ä»¶è¿½è¸ªåŠŸèƒ½ï¼Œå¯é€šè¿‡äº‹ä»¶è®¢é˜…çš„æ–¹å¼å¤„ç†è°ƒåº¦è¿‡ç¨‹çš„é‡è¦äº‹ä»¶ï¼Œç”¨äºæŸ¥è¯¢ã€ç»Ÿè®¡å’Œç›‘æ§ã€‚</p> <h3 id="_1-4-å°è£…elasticjob"><a href="#_1-4-å°è£…elasticjob" class="header-anchor">#</a> 1.4 å°è£…<code>elasticjob</code></h3> <p>ç”±äºå½“å½“ç½‘<code>Elastic job</code>å¤„äº1å¹´é—´æœªæ›´æ–°é˜¶æ®µï¼Œç›¸å…³jarå¤„äºå¯ä»¥ä½¿ç”¨é˜¶æ®µåŠŸèƒ½ä¸å…¨ã€‚è€ƒè™‘åˆ°ä½¿ç”¨åœºæ™¯ä¸ºå¤šé¡¹ç›®ä½¿ç”¨ï¼Œå°†<code>elastic-job-lite-spring</code>ç®€å•å°è£…ä¾¿äºä½¿ç”¨ã€‚</p> <h2 id="_2-ä½¿ç”¨è¯´æ˜"><a href="#_2-ä½¿ç”¨è¯´æ˜" class="header-anchor">#</a> 2.ä½¿ç”¨è¯´æ˜:</h2> <h3 id="_2-1-æ·»åŠ ä¾èµ–"><a href="#_2-1-æ·»åŠ ä¾èµ–" class="header-anchor">#</a> 2.1 æ·»åŠ ä¾èµ–</h3> <p>ps:<code>å®é™…versionç‰ˆæœ¬è¯·ä½¿ç”¨æœ€æ–°ç‰ˆ</code></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;dependency&gt;
  &lt;groupId&gt;com.purgeteam&lt;/groupId&gt;
  &lt;artifactId&gt;elasticjob-spring-boot-starter&lt;/artifactId&gt;
  &lt;version&gt;0.1.1.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div><h3 id="_2-2-é…ç½®"><a href="#_2-2-é…ç½®" class="header-anchor">#</a> 2.2 é…ç½®</h3> <p>ps: éœ€è¦<code>mysql</code>,<code>zookeeper</code>æ”¯æŒï¼Œè¯·æå‰æ­å»ºå¥½ã€‚</p> <p>é…ç½®<code>bootstrap.yml</code>æˆ–è€…<code>application.yml</code>ã€‚</p> <p>åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>spring:
  elasticjob:
    datasource: # jobéœ€è¦çš„è®°å½•æ•°æ®æº
      url: jdbc:mysql://127.0.0.1:3306/batch_log?useUnicode=true&amp;characterEncoding=utf-8&amp;verifyServerCertificate=false&amp;useSSL=false&amp;requireSSL=false
      driver-class-name: com.mysql.cj.jdbc.Driver
      username: root
      password: Rtqw123OpnmER
    regCenter: # æ³¨å†Œä¸­å¿ƒ
      serverList: 127.0.0.1:2181
      namespace: elasticJobDemo
</code></pre></div><h3 id="_2-3-å®šæ—¶å™¨å®ç°æ–¹æ³•ç¼–å†™"><a href="#_2-3-å®šæ—¶å™¨å®ç°æ–¹æ³•ç¼–å†™" class="header-anchor">#</a> 2.3 å®šæ—¶å™¨å®ç°æ–¹æ³•ç¼–å†™</h3> <p>åˆ›å»ºå®šæ—¶å™¨ç±»ï¼ˆå”¯ä¸€ä¸åŒçš„åœ°æ–¹åœ¨äºå°†<code>@Scheduled</code>æ”¹ä¸ºå®ç°<code>SimpleJob</code>æ¥å£å³å¯ï¼‰
å®šæ—¶å™¨å®ç°æ–¹æ³•ç¼–å†™åœ¨<code>execute</code>æ–¹æ³•é‡Œã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySimpleJob</span> <span class="token keyword">implements</span> <span class="token class-name">SimpleJob</span> <span class="token punctuation">{</span>

    <span class="token comment">//  @Scheduled(cron = &quot;0 0/1 * * * ?&quot;)</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">ShardingContext</span> shardingContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;Thread ID: %s, ä½œä¸šåˆ†ç‰‡æ€»æ•°: %s, &quot;</span> <span class="token operator">+</span>
                        <span class="token string">&quot;å½“å‰åˆ†ç‰‡é¡¹: %s.å½“å‰å‚æ•°: %s,&quot;</span> <span class="token operator">+</span>
                        <span class="token string">&quot;ä½œä¸šåç§°: %s.ä½œä¸šè‡ªå®šä¹‰å‚æ•°: %s&quot;</span><span class="token punctuation">,</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getJobParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ†ç‰‡å¤§è‡´å¦‚ä¸‹ï¼šæ ¹æ®é…ç½®çš„åˆ†ç‰‡å‚æ•°æ‰§è¡Œç›¸åº”çš„é€»è¾‘</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getShardingItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span> 
                <span class="token comment">// do something by sharding item 0</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> 
                <span class="token comment">// do something by sharding item 1</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> 
                <span class="token comment">// do something by sharding item 2</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token comment">// case n: ...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>logï¼šThread ID: 66, ä½œä¸šåˆ†ç‰‡æ€»æ•°: 1, å½“å‰åˆ†ç‰‡é¡¹: 0.å½“å‰å‚æ•°: Beijing,ä½œä¸šåç§°: PropertiesSimpleJob.ä½œä¸šè‡ªå®šä¹‰å‚æ•°: test
</code></pre></div><h3 id="_2-4-é…ç½®å®šæ—¶å™¨"><a href="#_2-4-é…ç½®å®šæ—¶å™¨" class="header-anchor">#</a> 2.4 é…ç½®å®šæ—¶å™¨</h3> <h4 id="_2-4-1-åˆ›å»ºconfigurationç±»"><a href="#_2-4-1-åˆ›å»ºconfigurationç±»" class="header-anchor">#</a> 2.4.1 åˆ›å»ºConfigurationç±»</h4> <p>å°†<code>ZookeeperRegistryCenter</code>å’Œ<code>JobEventConfiguration</code>æ³¨å…¥ã€‚
åˆ›å»º<code>JobScheduler</code> <code>@Bean(initMethod = &quot;init&quot;)</code>ã€‚
åœ¨<code>mySimpleJobScheduler</code>æ–¹æ³•é‡Œå…ˆé€šè¿‡<code>ElasticJobUtils#getLiteJobConfiguration</code>è·å–<code>LiteJobConfiguration</code>å¯¹è±¡ã€‚
åˆ›å»º<code>SpringJobScheduler</code>å¯¹è±¡è¿”å›å³å¯ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyJobConfig</span> <span class="token punctuation">{</span>

    <span class="token comment">// job åç§°</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> JOB_NAME <span class="token operator">=</span> <span class="token string">&quot;MySimpleJob&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// å®šæ—¶å™¨cronå‚æ•°</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> CRON <span class="token operator">=</span> <span class="token string">&quot;0 0/1 * * * ?&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// å®šæ—¶å™¨åˆ†ç‰‡</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SHARDING_TOTAL_COUNT <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// åˆ†ç‰‡å‚æ•°</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SHARDING_ITEM_PARAMETERS <span class="token operator">=</span> <span class="token string">&quot;0=Beijing,1=Shanghai,2=Guangzhou&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// è‡ªå®šä¹‰å‚æ•°</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> JOB_PARAMETERS <span class="token operator">=</span> <span class="token string">&quot;parameter&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">ZookeeperRegistryCenter</span> regCenter<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">JobEventConfiguration</span> jobEventConfiguration<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>initMethod <span class="token operator">=</span> <span class="token string">&quot;init&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JobScheduler</span> <span class="token function">mySimpleJobScheduler</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">MySimpleJob</span> mySimpleJob<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">LiteJobConfiguration</span> liteJobConfiguration <span class="token operator">=</span> <span class="token class-name">ElasticJobUtils</span>
                <span class="token punctuation">.</span><span class="token function">getLiteJobConfiguration</span><span class="token punctuation">(</span>mySimpleJob<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> JOB_NAME<span class="token punctuation">,</span> CRON<span class="token punctuation">,</span>
                        SHARDING_TOTAL_COUNT<span class="token punctuation">,</span> SHARDING_ITEM_PARAMETERS<span class="token punctuation">,</span> JOB_PARAMETERS<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‚æ•°ï¼š1.å®šæ—¶å™¨å®ä¾‹ï¼Œ2.æ³¨å†Œä¸­å¿ƒç±»ï¼Œ3.LiteJobConfigurationï¼Œ</span>
        <span class="token comment">//     3.å†å²è½¨è¿¹ï¼ˆä¸éœ€è¦å¯ä»¥çœç•¥ï¼‰</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringJobScheduler</span><span class="token punctuation">(</span>mySimpleJob<span class="token punctuation">,</span> regCenter<span class="token punctuation">,</span> liteJobConfiguration<span class="token punctuation">,</span> jobEventConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><code>ElasticJobUtils#getLiteJobConfiguration</code>å‚æ•°ç®€ä»‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * è·å– {@link LiteJobConfiguration} å¯¹è±¡
     *
     * @param jobClass               å®šæ—¶å™¨å®ç°ç±»
     * @param jobName                å®šæ—¶å™¨åç§°
     * @param cron                   å®šæ—¶å‚æ•°
     * @param shardingTotalCount     ä½œä¸šåˆ†ç‰‡æ€»æ•°
     * @param shardingItemParameters å½“å‰å‚æ•° å¯ä»¥ä¸ºnull
     * @param jobParameters          ä½œä¸šè‡ªå®šä¹‰å‚æ•° å¯ä»¥ä¸ºnull
     * @return {@link LiteJobConfiguration}
     */</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LiteJobConfiguration</span> <span class="token function">getLiteJobConfiguration</span><span class="token punctuation">(</span>
      <span class="token keyword">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">SimpleJob</span><span class="token punctuation">&gt;</span></span> jobClass<span class="token punctuation">,</span>
      <span class="token keyword">final</span> <span class="token class-name">String</span> jobName<span class="token punctuation">,</span>
      <span class="token keyword">final</span> <span class="token class-name">String</span> cron<span class="token punctuation">,</span>
      <span class="token keyword">final</span> <span class="token keyword">int</span> shardingTotalCount<span class="token punctuation">,</span>
      <span class="token keyword">final</span> <span class="token class-name">String</span> shardingItemParameters<span class="token punctuation">,</span>
      <span class="token keyword">final</span> <span class="token class-name">String</span> jobParameters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-4-2-ç®€åŒ–configurationç±»"><a href="#_2-4-2-ç®€åŒ–configurationç±»" class="header-anchor">#</a> 2.4.2 ç®€åŒ–Configurationç±»</h4> <p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„<code>@Configuration</code>å®ç°ç®€åŒ–,é…ç½®<code>bootstrap.yml</code>æˆ–è€…<code>application.yml</code>ã€‚</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticjob</span><span class="token punctuation">:</span>
    <span class="token key atrule">scheduled</span><span class="token punctuation">:</span>
      <span class="token key atrule">jobConfigMap</span><span class="token punctuation">:</span> // ä¸ºmapé›†åˆ
        <span class="token key atrule">PropertiesSimpleJob</span><span class="token punctuation">:</span> // å®šæ—¶å™¨keyåç§°
          <span class="token key atrule">jobName</span><span class="token punctuation">:</span> PropertiesSimpleJob // jobåç§°
          <span class="token key atrule">cron</span><span class="token punctuation">:</span> 0 0/1 * * * <span class="token punctuation">?</span> // cronè¡¨è¾¾å¼
          <span class="token key atrule">shardingTotalCount</span><span class="token punctuation">:</span> 2 // åˆ†ç‰‡æ•°é‡
          <span class="token key atrule">shardingItemParameters</span><span class="token punctuation">:</span> 0=123<span class="token punctuation">,</span>1=332 // åˆ†ç‰‡å‚æ•°
          <span class="token key atrule">jobParameters</span><span class="token punctuation">:</span> test // è‡ªå®šä¹‰å‚æ•°
</code></pre></div><p>æ³¨å…¥<code>SpringJobSchedulerFactory</code>ï¼Œåœ¨<code>propertiesSimpleJobScheduler</code>æ–¹æ³•é‡Œè°ƒç”¨<code>gerSpringJobScheduler</code>æ–¹æ³•å³å¯ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertiesSimpleJobConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">SpringJobSchedulerFactory</span> springJobSchedulerFactory<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>initMethod <span class="token operator">=</span> <span class="token string">&quot;init&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JobScheduler</span> <span class="token function">propertiesSimpleJobScheduler</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">PropertiesSimpleJob</span> job<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å‚æ•°ï¼š1.å®šæ—¶å™¨å®ä¾‹ï¼Œ2.é…ç½®åç§°ï¼Œ3.æ˜¯å¦å¼€å¯å†å²è½¨è¿¹</span>
        <span class="token keyword">return</span> springJobSchedulerFactory<span class="token punctuation">.</span><span class="token function">getSpringJobScheduler</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span><span class="token string">&quot;PropertiesSimpleJob&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-4-3-æ³¨è§£æ–¹å¼é…ç½®-æ¨èæ–¹å¼"><a href="#_2-4-3-æ³¨è§£æ–¹å¼é…ç½®-æ¨èæ–¹å¼" class="header-anchor">#</a> 2.4.3 æ³¨è§£æ–¹å¼é…ç½®(æ¨èæ–¹å¼)</h4> <p>ps:è¿™ä¸ªæ³¨è§£åŒ…å«äº†ä¸Šè¿°æ–¹å¼ï¼Œç®€åŒ–å®šæ—¶å™¨æ³¨å…¥ã€‚</p> <p>ç»§æ‰¿<code>SimpleJob</code>å®ç°æ–¹æ³•<code>execute</code>ã€‚</p> <p>åœ¨<code>AnnotationSimpleJob</code>ç±»ä¸ŠåŠ å…¥æ³¨è§£<code>@ElasticJobScheduler</code>å³å¯ã€‚
ä¸‹é¢ä¸ºå®Œæ•´æ³¨è§£ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@ElasticJobScheduler</span><span class="token punctuation">(</span>
        name <span class="token operator">=</span> <span class="token string">&quot;AnnotationSimpleJob&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å®šæ—¶å™¨åç§°</span>
        cron <span class="token operator">=</span> <span class="token string">&quot;0/8 * * * * ?&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å®šæ—¶å™¨è¡¨è¾¾å¼</span>
    	shardingTotalCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// ä½œä¸šåˆ†ç‰‡æ€»æ•° é»˜è®¤ä¸º1</span>
        shardingItemParameters <span class="token operator">=</span> <span class="token string">&quot;0=Beijing,1=Shanghai,2=Guangzhou&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// åˆ†ç‰‡åºåˆ—å·å’Œå‚æ•°ç”¨ç­‰å·åˆ†éš” ä¸éœ€è¦å‚æ•°å¯ä»¥ä¸åŠ </span>
        jobParameters <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ä½œä¸šè‡ªå®šä¹‰å‚æ•° ä¸éœ€è¦å‚æ•°å¯ä»¥ä¸åŠ </span>
    	isEvent <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// æ˜¯å¦å¼€å¯æ•°æ®è®°å½• é»˜è®¤ä¸ºtrue</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationSimpleJob</span> <span class="token keyword">implements</span> <span class="token class-name">SimpleJob</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">ShardingContext</span> shardingContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;Thread ID: %s, ä½œä¸šåˆ†ç‰‡æ€»æ•°: %s, &quot;</span> <span class="token operator">+</span>
                        <span class="token string">&quot;å½“å‰åˆ†ç‰‡é¡¹: %s.å½“å‰å‚æ•°: %s,&quot;</span> <span class="token operator">+</span>
                        <span class="token string">&quot;ä½œä¸šåç§°: %s.ä½œä¸šè‡ªå®šä¹‰å‚æ•°: %s&quot;</span><span class="token punctuation">,</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                shardingContext<span class="token punctuation">.</span><span class="token function">getJobParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/purgeteam/purgeteam-docs/edit/master/docs/guide/old/elastic-job-spring-boot/README.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤æ–‡æ¡£ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/guide/old/swagger-spring-boot/" class="prev">
        Swaggeré›†æˆ
      </a></span> <span class="next"><a href="/guide/old/dynamic-config-spring-boot/">
        åŠ¨æ€é…ç½®ç›‘å¬
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8d7c9d3d.js" defer></script><script src="/assets/js/2.1de14bcc.js" defer></script><script src="/assets/js/13.6e007452.js" defer></script>
  </body>
</html>
